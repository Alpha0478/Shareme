"use strict";(self.webpackChunkcash_app=self.webpackChunkcash_app||[]).push([[6],{1049:function(e,n,t){t(390);var l=t(2559);n.Z=function(e){var n,t,s=e.imageSrc,i=e.Func;return e.FromProfile?(n="100px",t="100px"):(n="46px",t="46px"),(0,l.jsx)("img",{src:s,alt:"profile pic",width:n,height:t,className:"bg-[#999] rounded-full border-2 object-fit border-[#606060] dark:border-white text-transparent",onClick:i})}},4006:function(e,n,t){t.r(n),t.d(n,{default:function(){return N}});var l=t(390),s=t(4165),i=t(5861),r=t(9439),o=t(1750),c=t(749),u=t(2494),d=t(8464),a=t(9134),f=t(1300),x=t(5838),v=t(129),h=t(8476),p=t(1049),m=t(2559),j=function(e){var n,j,g,b=e.video,w=e.socket,N=l.lazy((function(){return t.e(555).then(t.bind(t,8532))})),k=l.lazy((function(){return Promise.all([t.e(115),t.e(130)]).then(t.bind(t,4615))})),S=(0,l.useState)(!1),y=(0,r.Z)(S,2),z=y[0],Z=y[1],I=(0,l.useState)(!1),C=(0,r.Z)(I,2),F=C[0],_=C[1],P=(0,l.useState)(!1),U=(0,r.Z)(P,2),E=U[0],H=U[1],T=(0,l.useState)(!0),A=(0,r.Z)(T,2),K=A[0],O=A[1],R=(0,l.useState)(""),W=(0,r.Z)(R,2),q=W[0],D=W[1],G=(0,o.v9)((function(e){return e.user})).currentUser,L=(0,l.useState)(!1),V=(0,r.Z)(L,2),X=V[0],Y=V[1],$=(0,o.I0)(),B=(0,l.useRef)(null),J=(0,l.useRef)(),M=function(e,n){e.forEach((function(e){e.isIntersecting?(H(!0),O(!1)):null===J.current||e.isIntersecting||(null===J||void 0===J||J.current.pause(),H(!1),O(!0))}))};(0,l.useEffect)((function(){var e=new IntersectionObserver(M,{threshold:.5});return null!==J&&void 0!==J&&J.current&&e.observe(null===J||void 0===J?void 0:J.current),function(){e.disconnect()}}),[J]),(0,l.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.Z.get("users/find/".concat(b.userId));case 3:n=e.sent,D(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),500===e.t0.response.status&&console.log("No Connnections");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[b.userId]);var Q=function(){E?ee():(H(!0),J.current.play(),O(!1))},ee=function(){H(!1),null===J||void 0===J||J.current.pause(),O(!0)},ne=function(e){null===w||void 0===w||w.emit("sendNotification",{senderName:null===G||void 0===G?void 0:G.name,receiverName:null===q||void 0===q?void 0:q.name,msg:e})};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"bg-black h-full relative w-full z-0 snap-end snap-always",children:(0,m.jsx)("div",{className:"flex flex-col h-screen w-full items-center justify-center",children:(0,m.jsxs)("div",{ref:B,className:"flex flex-col top-0 absolute overflow-hidden z-60 h-full  w-full lg:w-1/2",children:[(0,m.jsx)("text",{className:"absolute text-white bottom-[30px] left-[5px] z-50 font-medium ml-2 w-[20%] h-5 ",children:null===q||void 0===q?void 0:q.name}),(0,m.jsxs)("div",{className:"flex flex-col absolute right-0 bottom-[80px] p-[4px] gap-[20px] rounded-[6px] w-auto items-center bg-none lg:bg-sky-300",children:[(0,m.jsxs)("div",{className:"flex flex-col z-50 relative items-center cursor-pointer",children:[(0,m.jsx)(p.Z,{imageSrc:null===q||void 0===q?void 0:q.profileUrl,Func:function(){return Z(!0)}}),(null===G||void 0===G?void 0:G._id)!==b.userId&&(0,m.jsx)(m.Fragment,{children:null!==G&&void 0!==G&&null!==(n=G.subscribedUsers)&&void 0!==n&&n.includes(null===q||void 0===q?void 0:q._id)?" ":(0,m.jsx)(m.Fragment,{children:G&&(0,m.jsx)("div",{className:"absolute w-[20px] h-[20px] bottom-[-6px] rounded-full text-[50px] text-white bg-[#00acee]",children:(0,m.jsx)(f.D0w,{fontSize:20,onClick:function(){return(0,x.xe)({userId:b.userId,channelId:null===q||void 0===q?void 0:q._id,handleNotification:ne,dispatch:$})}})})})})]}),G&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("button",{className:"cursor-pointer",onClick:function(){return(0,x.q0)({id:null===b||void 0===b?void 0:b._id,postState:v.Xt,post:b.postType+"s",userId:null===G||void 0===G?void 0:G._id,dispatch:$,handleNotification:ne})},children:[null!==b&&void 0!==b&&null!==(j=b.likes)&&void 0!==j&&j.includes(null===G||void 0===G?void 0:G._id)?(0,m.jsx)(f.$g3,{fontSize:35,style:{color:"red"}}):(0,m.jsx)(f.AWH,{fontSize:35,style:{color:"white"}}),(0,m.jsx)("text",{className:"text-white font-sm",children:null===b||void 0===b||null===(g=b.likes)||void 0===g?void 0:g.length})]}),(0,m.jsxs)("button",{style:{color:"white"},children:[(0,m.jsx)(d.Hlg,{fontSize:35,onClick:function(){return Y(!0),_(!0),void ee()}}),(0,m.jsx)("text",{className:"font-sm",children:"10K"})]}),(0,m.jsxs)("button",{style:{color:"white"},children:[(0,m.jsx)(u.ikO,{fontSize:35}),(0,m.jsx)("text",{className:"font-sm",children:"10K"})]})]})]}),(0,m.jsxs)(m.Fragment,{children:[K&&(0,m.jsx)("div",{className:"flex w-full h-full text-white z-0 items-center justify-center absolute ",children:(0,m.jsx)(c.gmG,{fontSize:50})}),(0,m.jsx)("video",{className:"z-5  w-auto h-full  object-cover lg:w-[280px] rounded-none lg:rounded-lg ",id:"post",src:b.Url,loop:!0,ref:J,onClick:function(){return Q()}})]})]})})}),F&&(0,m.jsx)(l.Suspense,{fallback:(0,m.jsx)(h.Z,{}),children:(0,m.jsx)(N,{setToggleComment:_,post:b,handleNotification:ne,handlePlay:Q,callFromVideo:X})}),z&&(0,m.jsx)(l.Suspense,{children:(0,m.jsx)(k,{type:b,channel:q,setToggleCardProfile:Z})})]})},g=t(471),b=t(5328),w=t(2271),N=function(e){var n=e.socket,t=(0,o.I0)(),l=(0,o.v9)((function(e){return e.videos})).videos,s=(0,b.ZP)(g.vs,g.WI,{onSuccess:function(e){return t((0,v.fY)(e))}}),i=s.isLoading,r=s.error;return(0,m.jsx)("div",{id:"videos",className:"flex flex-col h-full absolute bg-black w-full pt-0 mb-0 lg:pt-[25px] hide-scrollbar items-center",children:(0,m.jsx)("div",{className:"flex flex-col overflow-scroll pt-0 h-full hide-scrollbar w-full lg:w-3/4 snap-mandatory snap-y",children:i?(0,m.jsx)(h.Z,{}):r?(0,m.jsxs)("div",{className:"flex flex-col  text-lg text-[#cc1a00] h-full w-full items-center justify-center",children:[(0,m.jsx)(w.HlI,{fontSize:50}),"An error occured"]}):null===l||void 0===l?void 0:l.map((function(e){return(0,m.jsx)(j,{video:e,socket:n},e._id)}))})})}}}]);
//# sourceMappingURL=6.0582c7bd.chunk.js.map