"use strict";(self.webpackChunkcash_app=self.webpackChunkcash_app||[]).push([[555],{8532:function(e,n,t){t.r(n),t.d(n,{default:function(){return Z}});var r=t(4165),l=t(5861),s=t(9439),o=t(390),c=t(2271),i=t(399),a=t(6902),u=t(1750),d=t(749),f=t(9134),x=t(9722),m=t(3718),p=t(5838),v=t(8476),h=t(2559),j=function(e){e.type;var n,a=e.reply,x=e.socket,j=o.lazy((function(){return Promise.all([t.e(115),t.e(176)]).then(t.bind(t,4615))})),b=(0,o.useState)(!1),g=(0,s.Z)(b,2),w=g[0],N=g[1],y=(0,o.useState)(""),k=(0,s.Z)(y,2),Z=k[0],C=k[1],S=(0,o.useState)(!1),I=(0,s.Z)(S,2),_=I[0],z=I[1],F=(0,u.v9)((function(e){return e.user})).currentUser,P=(0,u.v9)((function(e){return e.replys})).replys,U=(0,u.I0)(),B=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.delete("/reply/".concat(n));case 2:t=P.filter((function(e){return e._id!==n})),U((0,m.yP)(t));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),L=function(e){null===x||void 0===x||x.emit("sendNotification",{senderName:null===F||void 0===F?void 0:F.name,receiverName:null===a||void 0===a?void 0:a.name,msg:e})};(0,o.useEffect)((function(){var e=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("user fetch"),e.prev=1,e.next=4,f.Z.get("users/find/".concat(a.userId));case 4:return n=e.sent,C(n.data),e.abrupt("return",(function(){C("")}));case 9:e.prev=9,e.t0=e.catch(1),500===e.t0.response.status&&console.log("No Connnections");case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[a.userId]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{id:"hide",className:"flex flex-row items-center relative w-full m-[3px]",children:[(0,h.jsx)("div",{className:"h-full items-center absolute",children:(0,h.jsx)("img",{className:"h-[36px] w-[36px] m-[8px] bg-[#999] rounded-full",src:Z.profileUrl,onClick:function(){z(!0)},alt:"profile pic"})}),(0,h.jsxs)("div",{className:"flex flex-col w-full p-[6px] ml-[52px] min-w-0",children:[(0,h.jsx)("div",{className:"font-bold h-[20px] text-sm flex flex-row align-center",children:null===a||void 0===a?void 0:a.name}),(0,h.jsxs)("div",{onClick:function(){return N(!0)},children:[a.desc,(0,h.jsxs)("span",{className:"flex-shrink-0",style:{color:"#999"},children:[(0,h.jsx)("span",{className:"px-1",children:"."}),(0,h.jsx)("span",{className:"font-xs",children:(0,i.WU)(a.createdAt)})]})]}),(0,h.jsxs)("button",{className:" flex flex-col items-center cursor-pointer absolute right-4",style:{color:"#999"},onClick:function(){return(0,p.q0)({id:null===a||void 0===a?void 0:a._id,postState:m.YO,post:"reply",userId:null===F||void 0===F?void 0:F._id,dispatch:U,handleNotification:L})},children:[null!==a&&void 0!==a&&null!==(n=a.likes)&&void 0!==n&&n.includes(null===F||void 0===F?void 0:F._id)?(0,h.jsx)(d.$0H,{style:{color:"red"}}):(0,h.jsx)(c.ped,{style:{color:"#999"}}),(0,h.jsx)("text",{className:"font-xs",children:a.likes.length})]}),w&&(0,h.jsx)("div",{className:"flex flex-row items-center rounded-[30px] bg-[#f5f5f5] dark:bg-[#202020] h-[32px] w-[80%] mt-[20px] ",children:(0,h.jsxs)("div",{className:"flex flex-row items-center justify-center  gap-[20px] w-full mr-[15px]",children:[F._id===(null===a||void 0===a?void 0:a.userId)&&(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("button",{className:"flex flex-col items-center cursor-pointer",onClick:function(){return B(null===a||void 0===a?void 0:a._id)},children:(0,h.jsx)(c.w14,{fontSize:25,style:{color:"#999"},id:"hide"})})}),(0,h.jsx)("span",{className:"ml-4",onClick:function(){return N(!1)},children:(0,h.jsx)(c.u5Z,{fontSize:12,style:{color:"#999"}})})]})})]})]}),_&&(0,h.jsx)(o.Suspense,{fallback:(0,h.jsx)(v.Z,{}),children:(0,h.jsx)(j,{channel:Z,setToggleProfile:z})})]})},b=t(1049),g=function(e){var n,v=e.socket,g=e.comment,w=e.setPlaceholder,N=e.setCommentId,y=e.setInputType,k=e.InputRef,Z=o.lazy((function(){return Promise.all([t.e(115),t.e(176)]).then(t.bind(t,4615))})),C=(0,o.useState)(!1),S=(0,s.Z)(C,2),I=S[0],_=S[1],z=(0,u.v9)((function(e){return e.user})).currentUser,F=(0,u.v9)((function(e){return e.comment})).currentComment,P=(0,o.useState)(!1),U=(0,s.Z)(P,2),B=U[0],L=U[1],q=(0,o.useState)(""),A=(0,s.Z)(q,2),T=A[0],R=A[1],W=(0,u.v9)((function(e){return e.replys})).replys,E=(0,o.useState)(!1),H=(0,s.Z)(E,2),$=H[0],G=H[1],M=(0,u.I0)(),O=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("user fetch"),e.prev=1,e.next=4,f.Z.get("users/find/".concat(g.userId));case 4:n=e.sent,R(n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),500===e.t0.response.status&&console.log("No Connnections");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){O()}),[g.userId]);var V=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.delete("/comments/".concat(n));case 2:t=F.filter((function(e){return e._id!==n})),M((0,x.N2)(t));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Y=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.get("/reply/".concat(n));case 2:t=e.sent,M((0,m.yP)(t.data)),N(n);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),D=function(e){null===v||void 0===v||v.emit("sendNotification",{senderName:null===z||void 0===z?void 0:z.name,receiverName:null===g||void 0===g?void 0:g.name,msg:e})};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{id:"hide",className:"flex flex-row ml-[6px] my-[3px] w-full relative items-center justify-center ",onMouseLeave:function(){return _(!1)},children:[(0,h.jsx)(b.Z,{imageSrc:null===T||void 0===T?void 0:T.profileUrl,Func:function(){return null===T||void 0===T||T.name,void((null===z||void 0===z?void 0:z._id)!==g.userId&&G(!0))}}),(0,h.jsxs)("div",{className:"flex flex-col w-full p-[6px] min-w-0",children:[(0,h.jsx)("span",{className:"text-md flex flex-row align-center h-[20px] font-medium",children:null===g||void 0===g?void 0:g.name}),(0,h.jsxs)("div",{className:"w-[80%] text-base",onClick:function(){return e=g._id,_(!0),L(!B),void Y(e);var e},children:[g.desc,(0,h.jsxs)("span",{className:"flex-shrink-0",style:{color:"#999"},children:[(0,h.jsx)("span",{className:"px-1",children:"."}),(0,h.jsx)("span",{className:"font-xs",children:(0,i.WU)(g.createdAt)})]})]}),(0,h.jsxs)("button",{className:"absolute right-4 flex flex-col justify-center h-full items-center cursor-pointer",style:{color:"#999"},onClick:function(){return(0,p.q0)({id:null===g||void 0===g?void 0:g._id,postState:x.xG,post:"comments",userId:null===z||void 0===z?void 0:z._id,dispatch:M,handleNotification:D})},children:[null!==g&&void 0!==g&&null!==(n=g.likes)&&void 0!==n&&n.includes(null===z||void 0===z?void 0:z._id)?(0,h.jsx)(d.$0H,{style:{color:"red"}}):(0,h.jsx)(c.ped,{style:{color:"#999"}}),(0,h.jsx)("text",{className:"font-xs",children:g.likes.length})]}),I&&(0,h.jsx)("div",{className:"flex flex-row items-center rounded-[30px] bg-[#f5f5f5] dark:bg-[#202020] h-[32px] w-[80%] mt-[20px] ",children:(0,h.jsxs)("div",{className:"flex flex-row items-center justify-center  gap-[20px] w-full mr-[15px]",children:[z._id===(null===g||void 0===g?void 0:g.userId)&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("button",{className:"flex flex-col items-center cursor-pointer",onClick:function(){return V(null===g||void 0===g?void 0:g._id)},children:(0,h.jsx)(c.w14,{fontSize:25,style:{color:"#999"},id:"hide"})}),(0,h.jsx)("button",{className:"flex flex-col items-center cursor-pointer",children:(0,h.jsx)(a.FNg,{fontSize:28,style:{color:"#999"}})})]}),(0,h.jsx)("button",{className:"flex flex-col items-center cursor-pointer",children:(0,h.jsx)(d.Bjt,{fontSize:20,style:{color:"#00acee"},onClick:function(){return e=g._id,w("reply to ".concat(g.name)),y("reply"),k.current.focus(),void Y(e);var e}})}),(0,h.jsx)("span",{className:"ml-4",onClick:function(){return _(!1),L(!1),void w("Add a comment...")},children:(0,h.jsx)(c.u5Z,{fontSize:12,style:{color:"#999"}})}),(0,h.jsxs)("div",{className:"flex flex-row align-center font-base font-normal",style:{color:"#999"},onClick:function(){return L(!B)},children:[null===W||void 0===W?void 0:W.length,(0,h.jsx)("h2",{className:" ml-1",style:{color:"#00acee"},children:"replies"})]})]})}),B&&(0,h.jsx)("div",{className:"flex flex-col absolute w-full p-[6px]",children:null===W||void 0===W?void 0:W.map((function(e){return(0,h.jsx)(j,{reply:e,socket:v},e.id)}))})]})]}),$&&(0,h.jsx)(o.Suspense,{children:(0,h.jsx)(Z,{channel:T,setToggleCardProfile:G})})]})},w=t(5032),N=t(4900),y=t(5545),k=t(5328),Z=function(e){var n=e.socket,t=e.setToggleComment,c=e.post,i=e.handleNotification,a=(e.callFromVideo,(0,o.useState)("")),d=(0,s.Z)(a,2),p=d[0],j=d[1],b=(0,o.useState)("Add a comment...."),Z=(0,s.Z)(b,2),C=Z[0],S=Z[1],I=(0,o.useState)("comment"),_=(0,s.Z)(I,2),z=_[0],F=_[1],P=(0,o.useState)(),U=(0,s.Z)(P,2),B=U[0],L=U[1],q=(0,u.v9)((function(e){return e.comment})).currentComment,A=(0,u.v9)((function(e){return e.user})).currentUser,T=c._id,R=null===A||void 0===A?void 0:A.name,W=p,E=(0,o.useRef)(),H=(0,u.I0)(),$=(0,y.s0)(),G=f.Z.create({baseURL:"http://192.168.0.107:8800"}),M="/api/comments",O=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.get("".concat(M,"/").concat(c._id));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=(0,k.ZP)(M,O,{onSuccess:function(e){return H((0,x.N2)(e))}}),Y=V.isLoading,D=V.error,J=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(n){var t,l,s,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("comment"!==z){e.next=16;break}return t="commented on your post",document.querySelector("#input").value="",K(),e.prev=4,e.next=7,f.Z.post("/comments",{name:R,desc:W,videoId:T});case 7:l=e.sent,H((0,x.Ir)(l.data)),(null===A||void 0===A?void 0:A._id)!==(null===c||void 0===c?void 0:c.userId)&&i(t),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(4);case 14:e.next=29;break;case 16:return s="replied on your post",document.querySelector("#input").value="",e.prev=18,e.next=21,f.Z.post("/reply",{name:R,desc:W,commentId:B});case 21:o=e.sent,H((0,m.Bn)(o.data)),(null===A||void 0===A?void 0:A._id)!==(null===c||void 0===c?void 0:c.userId)&&i(s),K(),e.next=29;break;case 27:e.prev=27,e.t1=e.catch(18);case 29:case"end":return e.stop()}}),e,null,[[4,12],[18,27]])})));return function(n){return e.apply(this,arguments)}}(),K=function(){F("comment"),S("Add a comment..."),j("")};return(0,h.jsxs)("div",{className:"bg-white dark:bg-black flex flex-col top-0 overflow-scroll hide-scrollbar h-[100dvh] z-50 lg:right-0 fixed w-full lg:w-[90%] lg:items-center",children:[(0,h.jsx)(w.Z,{header:"Comments",handleBackBtnCLick:function(e){t(!1),H((0,x.N2)(""))}}),(0,h.jsxs)("div",{className:"flex overflow-scroll hide-scrollbar flex-col pt-[60px] w-full lg:w-[90%]",children:[(0,h.jsx)("div",{className:"flex flex-col h-full pb-[70px] overflow-scroll w-full items-center hide-scrollbar",children:Y||D?(0,h.jsx)(v.Z,{}):q.length>1?q.map((function(e){return(0,h.jsx)(g,{socket:n,comment:e,setPlaceholder:S,setInputType:F,setCommentId:L,InputRef:E},e._id)})):(0,h.jsx)("h2",{className:"font-base font-normal mt-6 mb-6",style:{color:"#00acee"},children:"No Comments"})}),(0,h.jsxs)("div",{className:"flex flex-row bottom-0 fixed pl-[8px] items-center z-0 mb-[4px] w-full lg:w-[81%]",children:[(0,h.jsx)(N.Z,{}),(0,h.jsx)("textarea",{ref:E,id:"input",className:"bg-[#f5f5f5] dark:bg-[#202020] px-[8px] py-[2px] outline-none items-center w-[75%] border-2 border-[#f5f5f5] dark:border-[#202020] resize-none height-[15px] rounded-[6px] text-[15px]  hide-scrollbar ml-4 ",placeholder:C,row:1,maxLength:150,required:!0,name:"comment",onChange:function(e){return function(e){A?p.length<=150&&j(e.target.value):$("/signin")}(e)}}),p&&150!==p.length?(0,h.jsx)("text",{className:"absolute right-2 mx-[9px] text-[#00acee]",onClick:function(){return J()},children:"comment"===z?"save":"reply"}):(0,h.jsx)("text",{className:"absolute right-2 mx-[9px] text-[#999]",children:"comment"===z?"save":"reply"})]})]})]})}},5032:function(e,n,t){t(390);var r=t(2271),l=t(2559);n.Z=function(e){var n=e.header,t=e.handleBackBtnCLick,s=e.savebtn,o=e.nextbtn,c=e.savebtn2,i=e.cancelbtn,a=e.searchbar;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:" flex flex-row top-0 z-10 absolute w-full lg:border-b-[3px] border-[#f5f5f5] dark:border-[#202020] h-[50px] lg:h-[60px]",children:(0,l.jsxs)("div",{className:"w-full h-full relative items-center justify-around flex flex-row ",children:[t||i?(0,l.jsx)("button",{className:"flex flex-row cursor-pointer left-0 w-[42px] h-[42px] absolute ml-[4px] items-center hover:border-2 hover:text-[#00acee] border-[#00acee] justify-center hover:rounded-full",onClick:t,children:i||(0,l.jsx)(r.WmF,{fontSize:25})}):"",(0,l.jsx)("h2",{className:"font-medium text-xl",children:n}),s,c,a,o]})})})}}}]);
//# sourceMappingURL=555.127e0084.chunk.js.map